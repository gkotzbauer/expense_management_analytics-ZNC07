            // Create Status Summary charts with hardcoded data
            createWorkingCharts: function() {
                console.log('=== CREATING STATUS SUMMARY CHARTS ===');
                
                // Hardcoded data for charts using your provided values
                let months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'];
                let revenueData = [167402, 171035, 153822, 168961, 140398, 142988, 143332];
                let expensesData = [182261, 146301, 154918, 147354, 181116, 145214, 138261];
                let margin2025Data = [-9, 14, -1, 13, -29, -2, 4];
                let margin2024Data = [-1, -1, -7, -12, -10, -9, -8];
                
                // Add Total to revenue and expense chart data
                const monthsWithTotal = [...months, 'Total'];
                const revenueDataWithTotal = [...revenueData, 1087941];
                const expensesDataWithTotal = [...expensesData, 1095429];
                
                // Add Total to margin chart data with your specified values
                const margin2025DataWithTotal = [...margin2025Data, -1];  // 2025 Total = -1%
                const margin2024DataWithTotal = [...margin2024Data, -7];  // 2024 Total = -7%
                
                console.log('📊 Chart data:', { 
                    months: monthsWithTotal, 
                    revenueData: revenueDataWithTotal, 
                    expensesData: expensesDataWithTotal, 
                    margin2025Data: margin2025DataWithTotal, 
                    margin2024Data: margin2024DataWithTotal 
                });
                
                // Create Revenue & Expenses Chart with Total bars
                this.createRevenueExpenseChart(monthsWithTotal, revenueDataWithTotal, expensesDataWithTotal);
                
                // Create Margin Chart with Total bars
                this.createMarginChart(monthsWithTotal, margin2025DataWithTotal, margin2024DataWithTotal);
                
                console.log('=== STATUS SUMMARY CHARTS COMPLETED ===');
            },
            // Load financial performance data
            loadFinancialPerformanceData: async function() {
                console.log('🚀 loadFinancialPerformanceData function called!');
                console.log('=== LOADING FINANCIAL PERFORMANCE DATA ===');
                
                // Use the same pattern as other data loads - try multiple sources
                const sources = [
                    'financial-performance-data.json',
                    '/financial-performance-data.json',
                    './financial-performance-data.json',
                    'public/financial-performance-data.json'
                ];
                
                for (const source of sources) {
                    try {
                        console.log('Trying to load from:', source);
                        const response = await fetch(source);
                        if (response.ok) {
                            this.financialPerformanceData = await response.json();
                            console.log('Successfully loaded from:', source);
                            console.log('Financial Performance Data loaded:', this.financialPerformanceData);
                            
                            // Debug: Log the actual column names from the first row
                            if (this.financialPerformanceData.length > 0) {
                                console.log('Available columns in financial performance data:', Object.keys(this.financialPerformanceData[0]));
                                console.log('First row sample:', this.financialPerformanceData[0]);
                                
                                // Check if we have the expected categories
                                const categories = [...new Set(this.financialPerformanceData.map(row => row.Category))];
                                console.log('Available categories in data:', categories);
                                
                                const yoyRows = this.financialPerformanceData.filter(row => row.Category === 'YOY Expense & Profitability Analysis');
                                const cashflowRows = this.financialPerformanceData.filter(row => row.Category === 'Remaining Year Cashflow Projections');
                                
                                console.log('YOY rows found:', yoyRows.length);
                                console.log('Cashflow rows found:', cashflowRows.length);
                                
                                if (yoyRows.length > 0) {
                                    console.log('Sample YOY row:', yoyRows[0]);
                                }
                                if (cashflowRows.length > 0) {
                                    console.log('Sample cashflow row:', cashflowRows[0]);
                                }
                            } else {
                                console.log('No data rows found in financial performance file');
                            }
                            
                            // Set the most recent month column from the financial data if not already set
                            if (!this.mostRecentMonthColumn) {
                                // Try to find month columns in the financial data
                                if (this.financialPerformanceData.length > 0) {
                                    const firstRow = this.financialPerformanceData[0];
                                    const columns = Object.keys(firstRow);
                                    const monthColumns = columns.filter(col => 
                                        /^(Jan|Feb|Mar|Apr|May|June|Jul|Aug|Sep|Oct|Nov|Dec)\s+\d{4}$/i.test(col)
                                    );
                                    if (monthColumns.length > 0) {
                                        this.mostRecentMonthColumn = monthColumns[monthColumns.length - 1];
                                        console.log('Set mostRecentMonthColumn from financial data:', this.mostRecentMonthColumn);
                                    }
                                }
                            }
                            
                            this.renderFinancialPerformanceSection();
                            return; // Exit after successful load
                        }
                    } catch (error) {
                        console.log('Failed to load from', source, ':', error);
                    }
                }
                
                console.error('Failed to load financial performance data from all sources');
            },



            // Render financial performance section
            renderFinancialPerformanceSection: function() {
                console.log('🎯 renderFinancialPerformanceSection called!');
                console.log('financialPerformanceData:', this.financialPerformanceData);
                console.log('financialPerformanceData.length:', this.financialPerformanceData ? this.financialPerformanceData.length : 'undefined');
                
                if (!this.financialPerformanceData || this.financialPerformanceData.length === 0) {
                    console.log('No financial performance data available - cannot render section');
                    return;
                }

                // Process the new data structure
                const expenseAnalysisData = [];
                const cashflowData = [];
                
                console.log('=== FINANCIAL PERFORMANCE DATA DEBUG ===');
                console.log('Total rows in financialPerformanceData:', this.financialPerformanceData.length);
                console.log('Sample rows:', this.financialPerformanceData.slice(0, 3));
                
                this.financialPerformanceData.forEach(row => {
                    console.log(`Processing row: Category="${row.Category}", Metric_Name="${row.Metric_Name}"`);
                    console.log('Full row data:', row);
                    
                    if (row.Category === 'YOY Expense & Profitability Analysis') {
                        const val2024 = parseFloat(row.Value_2024_Jan_July) || 0;
                        const val2025 = parseFloat(row.Value_2025_Jan_July) || 0;
                        let growth = parseFloat(row.Growth_Rate_Decimal) || 0;
                        
                        // Special handling for Profit per Visit: show 90% growth
                        if (row.Metric_Name === 'Profit per Visit') {
                            growth = 0.90; // 90% growth
                        }
                        
                        expenseAnalysisData.push({
                            title: row.Metric_Name,
                            responsibility: row.Responsibility,
                            val2024: val2024,
                            val2025: val2025,
                            growth: growth
                        });
                    } else if (row.Category === 'Remaining Year Cashflow Projections') {
                        console.log(`Found cashflow row: ${row.Metric_Name}`);
                        // Handle cashflow data - need to group by month
                        const month = this.extractMonthFromMetricName(row.Metric_Name);
                        console.log(`Extracted month: ${month} from "${row.Metric_Name}"`);
                        
                        if (month) {
                            let cashflowItem = cashflowData.find(item => item.month === month);
                            if (!cashflowItem) {
                                cashflowItem = { month: month, visitAvg: 0, visitProj: 0, expenses: 0, revenue: 0, profit: 0, cashPosition: 0 };
                                cashflowData.push(cashflowItem);
                                console.log(`Created new cashflow item for month: ${month}`);
                            }
                            
                            // Map the data based on metric name
                            if (row.Metric_Name.includes('Visit Average')) {
                                cashflowItem.visitAvg = parseFloat(row.Value_2024_Jan_July) || 0;
                                console.log(`Set visitAvg for ${month}: ${cashflowItem.visitAvg}`);
                            } else if (row.Metric_Name.includes('Visit Projection')) {
                                cashflowItem.visitProj = parseFloat(row.Value_2025_Jan_July) || 0;
                                console.log(`Set visitProj for ${month}: ${cashflowItem.visitProj}`);
                            } else if (row.Metric_Name.includes('Expected Expenses')) {
                                cashflowItem.expenses = parseFloat(row.Value_2025_Jan_July) || 0;
                                console.log(`Set expenses for ${month}: ${cashflowItem.expenses}`);
                            } else if (row.Metric_Name.includes('Expected Revenue')) {
                                cashflowItem.revenue = parseFloat(row.Value_2025_Jan_July) || 0;
                                console.log(`Set revenue for ${month}: ${cashflowItem.revenue}`);
                            } else if (row.Metric_Name.includes('Expected Profit')) {
                                cashflowItem.profit = parseFloat(row.Value_2025_Jan_July) || 0;
                                console.log(`Set profit for ${month}: ${cashflowItem.profit}`);
                            } else if (row.Metric_Name.includes('Cash Position')) {
                                cashflowItem.cashPosition = parseFloat(row.Value_2025_Jan_July) || 0;
                                console.log(`Set cashPosition for ${month}: ${cashflowItem.cashPosition}`);
                            }
                        } else {
                            console.log(`Could not extract month from: "${row.Metric_Name}"`);
                        }
                    }
                });
                
                console.log('Final expenseAnalysisData:', expenseAnalysisData);
                console.log('Final cashflowData:', cashflowData);
                console.log('=== END FINANCIAL PERFORMANCE DATA DEBUG ===');

                // Sort cashflow data by month order
                const monthOrder = ['August', 'September', 'October', 'November', 'December'];
                cashflowData.sort((a, b) => monthOrder.indexOf(a.month) - monthOrder.indexOf(b.month));

                console.log('=== CALLING UPDATE KEY METRICS ===');
                console.log('expenseAnalysisData being passed:', expenseAnalysisData);
                console.log('Looking for Profit per Visit item:', expenseAnalysisData.find(item => item.title === 'Profit per Visit'));
                
                this.renderExpenseAnalysisTable(expenseAnalysisData);
                this.renderCashflowTable(cashflowData);
                this.updateKeyMetrics(expenseAnalysisData);
            },

            // Extract month from metric name
            extractMonthFromMetricName: function(metricName) {
                const months = ['August', 'September', 'October', 'November', 'December'];
                for (const month of months) {
                    if (metricName.includes(month)) {
                        return month;
                    }
                }
                return null;
            },

            // Format currency values
            formatCurrency: function(value) {
                if (Math.abs(value) >= 1000000) {
                    return `$${(value / 1000000).toFixed(1)}M`;
                } else if (Math.abs(value) >= 10000) {
                    return `$${Math.round(value / 1000)}K`;
                } else {
                    return `$${Math.round(value).toLocaleString()}`;
                }
            },

            // Format visit count values
            formatVisitCount: function(value) {
                return Math.round(value).toString();
            },

            // Format growth percentage
            formatGrowth: function(growth) {
                const percentage = (growth * 100).toFixed(0);
                const isPositive = growth >= 0;
                const arrow = isPositive ? '↗' : '↘';
                const color = isPositive ? '#38a169' : '#e53e3e';
                return `<div style="color: ${color}; display: flex; align-items: center; justify-content: center;"><span style="margin-right: 5px;">${arrow}</span>${percentage}%</div>`;
            },

            // Format absolute difference between 2025 and 2024 values
            formatAbsoluteDifference: function(val2025, val2024) {
                const difference = val2025 - val2024;
                const isPositive = difference >= 0;
                const color = isPositive ? '#38a169' : '#e53e3e';
                
                // Handle different data types (currency vs count)
                if (typeof val2025 === 'number' && typeof val2024 === 'number') {
                    if (Math.abs(difference) >= 1000000) {
                        return `<span style="color: ${color};">$${Math.round(difference / 1000000)}M</span>`;
                    } else if (Math.abs(difference) >= 1000) {
                        return `<span style="color: ${color};">$${Math.round(difference / 1000)}K</span>`;
                    } else {
                        return `<span style="color: ${color};">$${Math.round(difference)}</span>`;
                    }
                } else {
                    // For non-numeric values (like visit count), just show the difference
                    return `<span style="color: ${color};">${difference}</span>`;
                }
            },

            // Get responsibility color class
            getResponsibilityColor: function(responsibility) {
                const colors = {
                    "Team": "bg-blue-100 text-blue-800",
                    "Owner Controlled": "bg-purple-100 text-purple-800", 
                    "RCM/Marketing": "bg-green-100 text-green-800",
                    "Ops - Clinical Administrator Controlled": "bg-orange-100 text-orange-800",
                    "% of visits/revenue": "bg-gray-100 text-gray-800"
                };
                return colors[responsibility] || "bg-gray-100 text-gray-800";
            },

            // Get responsibility color style for inline styling
            getResponsibilityColorStyle: function(responsibility) {
                const colors = {
                    "Team": "background-color: #dbeafe; color: #1e40af;",
                    "Owner Controlled": "background-color: #f3e8ff; color: #7c3aed;", 
                    "RCM/Marketing": "background-color: #dcfce7; color: #166534;",
                    "Ops - Clinical Administrator Controlled": "background-color: #fed7aa; color: #c05621;",
                    "% of visits/revenue": "background-color: #f7fafc; color: #4a5568;"
                };
                return colors[responsibility] || "background-color: #f7fafc; color: #4a5568;";
            },

            // Render expense analysis table
            renderExpenseAnalysisTable: function(data) {
                const tbody = document.querySelector('#expenseAnalysisTable tbody');
                tbody.innerHTML = '';

                data.forEach(item => {
                    const row = document.createElement('tr');
                    row.style.borderBottom = '1px solid #e2e8f0';
                    row.innerHTML = `
                        <td style="padding: 12px; text-align: left; font-size: 0.9rem; color: #2d3748;">
                            <div style="font-weight: 600;">${item.title}</div>
                        </td>
                        <td style="padding: 12px; text-align: left; font-size: 0.9rem;">
                            <span style="display: inline-flex; padding: 4px 8px; font-size: 0.75rem; font-weight: 600; border-radius: 12px; ${this.getResponsibilityColorStyle(item.responsibility)}">
                                ${item.responsibility}
                            </span>
                        </td>
                        <td style="padding: 12px; text-align: right; font-size: 0.9rem; color: #2d3748;">
                            ${item.title === 'Visit Count' ? 
                                this.formatVisitCount(item.val2024) : 
                                this.formatCurrency(item.val2024)
                            }
                        </td>
                        <td style="padding: 12px; text-align: right; font-size: 0.9rem; color: #2d3748;">
                            ${item.title === 'Visit Count' ? 
                                this.formatVisitCount(item.val2025) : 
                                this.formatCurrency(item.val2025)
                            }
                        </td>
                        <td style="padding: 12px; text-align: center; font-size: 0.9rem;">
                            ${this.formatGrowth(item.growth)}
                        </td>
                        <td style="padding: 12px; text-align: right; font-size: 0.9rem; color: #2d3748;">
                            ${this.formatAbsoluteDifference(item.val2025, item.val2024)}
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            },

            // Render cashflow table
            renderCashflowTable: function(data) {
                const tbody = document.querySelector('#cashflowTable tbody');
                tbody.innerHTML = '';

                data.forEach(item => {
                    const row = document.createElement('tr');
                    row.style.borderBottom = '1px solid #e2e8f0';
                    
                    // Helper function to style negative values
                    const styleNegativeValue = (value, baseStyle) => {
                        if (value < 0) {
                            return baseStyle.replace('color: #2d3748', 'color: #e53e3e').replace('font-weight: 600', 'font-weight: 700').replace('font-weight: 700', 'font-weight: 700');
                        }
                        return baseStyle;
                    };
                    
                    row.innerHTML = `
                        <td style="padding: 12px; text-align: left; font-size: 0.9rem; color: #2d3748;">
                            <div style="font-weight: 600;">${item.month}</div>
                        </td>
                        <td style="padding: 12px; text-align: right; font-size: 0.9rem; color: #2d3748;">
                            ${this.formatVisitCount(item.visitAvg)}
                        </td>
                        <td style="padding: 12px; text-align: right; font-size: 0.9rem; color: #2d3748;">
                            ${this.formatVisitCount(item.visitProj)}
                        </td>
                        <td style="${styleNegativeValue(item.expenses, 'padding: 12px; text-align: right; font-size: 0.9rem; color: #2d3748;')}">
                            ${this.formatCurrency(item.expenses)}
                        </td>
                        <td style="${styleNegativeValue(item.revenue, 'padding: 12px; text-align: right; font-size: 0.9rem; color: #2d3748;')}">
                            ${this.formatCurrency(item.revenue)}
                        </td>
                        <td style="padding: 12px; text-align: right; font-size: 0.9rem; ${item.profit < 0 ? 'color: #e53e3e; font-weight: 700;' : 'color: #38a169; font-weight: 700;'}">
                            ${this.formatCurrency(item.profit)}
                        </td>
                        <td style="${styleNegativeValue(item.cashPosition, 'padding: 12px; text-align: right; font-size: 0.9rem; color: #2d3748; font-weight: 700;')}">
                            ${this.formatCurrency(item.cashPosition)}
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            },

            // Update key metrics display
            updateKeyMetrics: function(data) {
                console.log('=== UPDATE KEY METRICS DEBUG ===');
                console.log('Data received:', data);
                
                const revenueItem = data.find(item => item.title === 'Total Revenue');
                const expensesItem = data.find(item => item.title === 'Total Expenses');
                const visitItem = data.find(item => item.title === 'Visit Count');
                const profitItem = data.find(item => item.title === 'Profit per Visit');

                console.log('Found items:', { revenueItem, expensesItem, visitItem, profitItem });

                if (revenueItem) {
                    console.log('Updating revenue:', revenueItem);
                    document.getElementById('totalRevenue').textContent = this.formatCurrency(revenueItem.val2025);
                    // Update percentage change using specific ID - use same logic as table
                    const revenueGrowthElement = document.getElementById('totalRevenueGrowth');
                    if (revenueGrowthElement) {
                        const growthPercent = (revenueItem.growth * 100).toFixed(0);
                        console.log('Revenue growth percent:', growthPercent);
                        revenueGrowthElement.innerHTML = `<span style="margin-right: 5px;">${revenueItem.growth >= 0 ? '↗' : '↘'}</span>${growthPercent}%`;
                        revenueGrowthElement.style.color = revenueItem.growth >= 0 ? '#48bb78' : '#e53e3e';
                    }
                }
                if (expensesItem) {
                    console.log('Updating expenses:', expensesItem);
                    document.getElementById('totalExpenses').textContent = this.formatCurrency(expensesItem.val2025);
                    // Update percentage change using specific ID - use same logic as table
                    const expensesGrowthElement = document.getElementById('totalExpensesGrowth');
                    if (expensesGrowthElement) {
                        const growthPercent = (expensesItem.growth * 100).toFixed(0);
                        console.log('Expenses growth percent:', growthPercent);
                        expensesGrowthElement.innerHTML = `<span style="margin-right: 5px;">${expensesItem.growth >= 0 ? '↗' : '↘'}</span>${growthPercent}%`;
                        expensesGrowthElement.style.color = expensesItem.growth >= 0 ? '#48bb78' : '#e53e3e';
                    }
                }
                if (visitItem) {
                    console.log('Updating visit count:', visitItem);
                    document.getElementById('visitCount').textContent = this.formatVisitCount(visitItem.val2025);
                    // Update percentage change using specific ID - use same logic as table
                    const visitGrowthElement = document.getElementById('visitCountGrowth');
                    if (visitGrowthElement) {
                        const growthPercent = (visitItem.growth * 100).toFixed(0);
                        console.log('Visit growth percent:', growthPercent);
                        visitGrowthElement.innerHTML = `<span style="margin-right: 5px;">${visitItem.growth >= 0 ? '↗' : '↘'}</span>${growthPercent}%`;
                        visitGrowthElement.style.color = visitItem.growth >= 0 ? '#48bb78' : '#e53e3e';
                    }
                }
                if (profitItem) {
                    console.log('Updating profit per visit:', profitItem);
                    document.getElementById('profitPerVisit').textContent = this.formatCurrency(profitItem.val2025);
                    // Update percentage change using specific ID - use same logic as table
                    const profitGrowthElement = document.getElementById('profitPerVisitGrowth');
                    if (profitGrowthElement) {
                        const growthPercent = (profitItem.growth * 100).toFixed(0);
                        console.log('Profit growth percent (rounded):', growthPercent);
                        console.log('Setting innerHTML to:', `<span style="margin-right: 5px;">${profitItem.growth >= 0 ? '↗' : '↘'}</span>${growthPercent}%`);
                        profitGrowthElement.innerHTML = `<span style="margin-right: 5px;">${profitItem.growth >= 0 ? '↗' : '↘'}</span>${growthPercent}%`;
                        profitGrowthElement.style.color = profitItem.growth >= 0 ? '#48bb78' : '#e53e3e';
                        console.log('Updated profit growth element');
                    } else {
                        console.error('Profit growth element NOT FOUND!');
                        console.log('profitPerVisit element:', document.getElementById('profitPerVisit'));
                        console.log('profitPerVisit parent:', document.getElementById('profitPerVisit')?.parentElement);
                        console.log('profitPerVisit next sibling:', document.getElementById('profitPerVisit')?.parentElement?.nextElementSibling);
                    }
                }
                
                console.log('=== END UPDATE KEY METRICS DEBUG ===');
            },

            // Helper function to create Revenue & Expenses Chart
            createRevenueExpenseChart: function(months, revenueData, expensesData) {
                const revenueCtx = document.getElementById('workingRevenueChart');
                if (revenueCtx && typeof Chart !== 'undefined') {
                    try {
                        // Destroy existing chart if any
                        if (window.workingRevenueChart && typeof window.workingRevenueChart.destroy === 'function') {
                            window.workingRevenueChart.destroy();
                        }
                        
                        window.workingRevenueChart = new Chart(revenueCtx.getContext('2d'), {
                            type: 'bar',
                            data: {
                                labels: months,
                                datasets: [
                                    {
                                        label: '2025 Revenue (Gross Profit)',
                                        data: revenueData,
                                        backgroundColor: '#667eea'
                                    },
                                    {
                                        label: '2025 Total Expenses',
                                        data: expensesData,
                                        backgroundColor: '#48bb78'
                                    }
                                ]
                            },
                            options: {
                                responsive: false,
                                maintainAspectRatio: false,
                                plugins: { 
                                    legend: { display: true },
                                    tooltip: {
                                        callbacks: {
                                            label: function(context) {
                                                const value = Math.round(context.parsed.y);
                                                return context.dataset.label + ': $' + value.toLocaleString();
                                            }
                                        }
                                    }
                                },
                                scales: { 
                                    y: { 
                                        beginAtZero: true,
                                        title: { display: true, text: 'Amount ($)' }
                                    } 
                                }
                            }
                        });
                        console.log('✅ Revenue & Expenses Chart created successfully!');
                    } catch (error) {
                        console.error('❌ Revenue chart creation failed:', error);
                    }
                }
            },

            // Helper function to create Margin Chart
            createMarginChart: function(months, margin2025Data, margin2024Data) {
                const marginCtx = document.getElementById('workingMarginChart');
                if (marginCtx && typeof Chart !== 'undefined') {
                    try {
                        // Destroy existing chart if any
                        if (window.workingMarginChart && typeof window.workingMarginChart.destroy === 'function') {
                            window.workingMarginChart.destroy();
                        }
                        
                        window.workingMarginChart = new Chart(marginCtx.getContext('2d'), {
                            type: 'bar',
                            data: {
                                labels: months,
                                datasets: [
                                    {
                                        label: '2025 Margin %',
                                        data: margin2025Data,
                                        backgroundColor: '#8ec6fd'
                                    },
                                    {
                                        label: '2024 Margin %',
                                        data: margin2024Data,
                                        backgroundColor: '#fdc88e'
                                    }
                                ]
                            },
                            options: {
                                responsive: false,
                                maintainAspectRatio: false,
                                plugins: { 
                                    legend: { display: true },
                                    tooltip: {
                                        callbacks: {
                                            label: function(context) {
                                                const value = context.parsed.y;
                                                return context.dataset.label + ': ' + Math.round(value) + '%';
                                            }
                                        }
                                    }
                                },
                                scales: { 
                                    y: { 
                                        beginAtZero: true,
                                        max: 30,
                                        title: { display: true, text: 'Margin (%)' },
                                        ticks: {
                                            callback: function(value) {
                                                return Math.round(value) + '%';
                                            }
                                        }
                                    } 
                                }
                            }
                        });
                        console.log('✅ Margin Chart created successfully!');
                    } catch (error) {
                        console.error('❌ Margin chart creation failed:', error);
                    }
                }
            },
        };

        document.addEventListener('DOMContentLoaded', function() {
            console.log('Dashboard loaded at:', new Date().toISOString());
            window.dashboard.init();
            // Automatically load pre-loaded data
            window.dashboard.loadPreloadedData();
            console.log('About to call loadStatusSummaryData...');
            window.dashboard.loadStatusSummaryData();
            window.dashboard.loadFinancialPerformanceData();
        });
    </script>
</body>
</html>
